class PrintManagerTest is subclass of Test

operations

	public testAddClient: () ==> ()
		testAddClient() ==
		(	
			dcl manager: PrintManager;
			dcl cli: Client;
			PrintManager`clearInstance();
			manager := PrintManager`getInstance();
			IO`print("Test PrintManager - add client\n");
			cli := manager.addClient("utilizador", "123456778", 10.0);
			assertEqual(manager.getCurrentUser(), cli);
		);
		
	public testLogout: () ==> ()
		testLogout() ==
		(
			PrintManager`getInstance().logout();
			assertEqual(PrintManager`getInstance().getCurrentUser(), nil);	
		);
	
	public testFailLogin: () ==> ()
		testFailLogin() ==
		(
			dcl manager: PrintManager;
			dcl cli: [Client];
			PrintManager`clearInstance();
			manager := PrintManager`getInstance();
			IO`print("Test PrintManager - fail login\n");
			cli := manager.addClient("utilizador", "123456778", 10.0);
			assertEqual(manager.getCurrentUser(), cli);
			PrintManager`getInstance().logout();
			cli := PrintManager`getInstance().login("utilizador", "1234567");
			assertEqual(cli, nil);
		);
		
	public testAddMultipleClient: () ==> ()
		testAddMultipleClient() ==
		(	
			dcl manager: PrintManager;
			dcl cli: Client;
			dcl cli2: Client;
			PrintManager`clearInstance();
			manager := PrintManager`getInstance();
			IO`print("Test PrintManager - add multiple clients\n");
			cli := manager.addClient("utilizador", "123456778", 10.0);
			assertEqual(manager.getCurrentUser(), cli);
			PrintManager`getInstance().logout();
			assertEqual(manager.getCurrentUser(), nil);
			cli2 := manager.addClient("utilizador2", "utiliza123456", 10.0);
			assertEqual(manager.getCurrentUser(), cli2);
		);
		
	public testAddEmployee: () ==> ()
		testAddEmployee() ==
		(	
			dcl manager: PrintManager;
			dcl emp: Employee;
			PrintManager`clearInstance();
			manager := PrintManager`getInstance();
			IO`print("Test PrintManager - add employee\n");
			emp := manager.addEmployee("emp", "emp123456778", <Regular>);
			assertEqual(manager.getCurrentUser(), emp);
		);

	public test: () ==> ()
		test() ==
		(
			testAddClient();
			testLogout();
			testFailLogin();
			testAddMultipleClient();
			testAddEmployee();
		)
end PrintManagerTest