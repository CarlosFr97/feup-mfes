class UserTest is subclass of Test

operations

	public testReportMalfunction: () ==> ()
		testReportMalfunction() ==
			(
				dcl emp: Employee; 
 				dcl queue: set of Queue := {}; 
 				dcl cli:User;
 				dcl printer:Printer;
 				dcl malf:Malfunction;
 				PrintManager`clearInstance();
 				IO`print("Test Client - report malfunction\n");
 				-- emp := createEmployee();
 				-- queue := queue union {createQueue()};
 				printer := PrintManager`getInstance().addPrinter(0,"local1",queue);
				PrintManager`getInstance().logout();
 				-- cli := createClient();
				malf := cli.reportMalfunction(printer,<Paper>,"problema");
				assertEqual(malf.getReportedBy(), cli);
				assertEqual(malf.getPrinter(), printer);
				assertEqual(malf.getState(), <Waiting>);
				PrintManager`getInstance().logout();
				emp := PrintManager`getInstance().login("empregado","emp12345");
				assertTrue(malf in set PrintManager`getInstance().getMalfunctions());
				
			);

end UserTest